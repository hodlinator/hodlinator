# 2025 July-September

## July

### Type-safe settings retrieval

Re-reviewed: <https://github.com/bitcoin/bitcoin/pull/31260#pullrequestreview-2960951696>

* ðŸŒŸ Started using `mypy` (static type checker for Python) for the first time, temporarily adding type annotations to get a better handle on his ephemeral code refactoring script: <https://github.com/bitcoin/bitcoin/pull/31260#discussion_r2179665073>


### Fundamental protocol units deep dive

ðŸŒŸ In answering a review comment, went down the rabbit hole of understanding the details of `CBlockHeader::nBits` and chainwork units: <https://github.com/bitcoin/bitcoin/pull/32579#discussion_r2205888037>


### Misc

* Reviewed change making feature_init.py test less flaky: <https://github.com/bitcoin/bitcoin/pull/32835#issuecomment-3029241989>
* Reviewed libexec/ executables: <https://github.com/bitcoin/bitcoin/pull/31679#pullrequestreview-2980338061>
* Continued work on HeadersSyncState test improvements: <https://github.com/bitcoin/bitcoin/pull/32579#pullrequestreview-3017863907>
* Review continued of sigop size documentation/RPC improvements worked on by â‚¿OSS 2025 student: <https://github.com/bitcoin/bitcoin/pull/32800#pullrequestreview-3026725085>
* Reviewed `Txid`/`Wtxid`/`GenTxid` type safety improvement follow-ups: <https://github.com/bitcoin/bitcoin/pull/33005#pullrequestreview-3035484779>
* Reviewed adding bad ports: <https://github.com/bitcoin/bitcoin/pull/32826>


## August

### Transaction location index

@romanz, the developer behind the Electrum Rust server ElectRS has been working on a new index he proposes to include in Bitcoin Core.

* ðŸŒŸ Provided extensive feedback, catching an off-by-one error and proposing further optimizations: <https://github.com/bitcoin/bitcoin/pull/32541#pullrequestreview-3081181690>.
* ðŸŒŸ Also suggested further research idea to use OS-syscalls to send a chunk of a file over a network socket in one go (<https://github.com/bitcoin/bitcoin/pull/32541#pullrequestreview-3155477609>) (and used pre-existing support in libevent to prototype it out and measure a 27% speedup), however, it would not work broadly due to the XOR obfuscation we apply to block data.


### Sockman lite

ðŸŒŸ Fairly extensive review of pinheadmz's Sockman lite, with suggestions to many aspects of the code, also proposing adding support for simulating partial send/receive of data on mocked sockets: <https://github.com/bitcoin/bitcoin/pull/32747#pullrequestreview-3022243737>


### Proposed pre-emptive correction of Headers Sync test

ðŸŒŸ Suggested my \#32579 for inclusion in v30 milestone (<https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2025-08-07#1142145;>). Was dropped after 2 weeks <https://github.com/bitcoin/bitcoin/pull/32579#issuecomment-3211267309>, which I accepted but it still motivated me to adapt the PR further.


### `HeadersSyncState` instance count predictability

Started working on this as I realized it was a prerequisite for my Headers Sync cache (<https://github.com/l0rinc/bitcoin/pull/3>).

* Making it more predictable was already suggested in 3 years old comments (<https://github.com/bitcoin/bitcoin/pull/25720#discussion_r936707629>, <https://github.com/bitcoin/bitcoin/pull/25720#issuecomment-1214656320>).
* (Current very rough WIP changes: <https://github.com/bitcoin/bitcoin/compare/master...63eb7469327bb21278a0541bb2bae74129bb5bb1>)


### Misc

* Asked question on Delving about template sharing idea from @ajtowns being limited to 1 hop, with answers from @sipa & @gmaxwell: <https://delvingbitcoin.org/t/sharing-block-templates/1906/10>
* Reviewed follow-up to PR to obfuscation optimizations, merged before feedback was responded to, c'est la vie: <https://github.com/bitcoin/bitcoin/pull/33039#pullrequestreview-3081045303>
    * ðŸŒŸ In the original PR on May 20th (between OpenSats grant periods) I provided a further ~2x optimization suggestion <https://github.com/bitcoin/bitcoin/pull/31144#discussion_r2097271922> - contributing slightly to the overall ~20% IBD speedup in v30 (<https://github.com/bitcoin/bitcoin/pull/32043> / <https://x.com/L0RINC/status/1965119543476687263> / <https://x.com/adam3us/status/1968528443873624262>).
* Ran IBD benchmarks for given PR + baseline: <https://github.com/bitcoin/bitcoin/pull/31645#pullrequestreview-3128539265>
* Reviewed increased testing and code improvements to sigop-counting and script type checking (<https://github.com/bitcoin/bitcoin/pull/32729#pullrequestreview-3094123250>, <https://github.com/bitcoin/bitcoin/pull/32729#pullrequestreview-3104559199>, <https://github.com/bitcoin/bitcoin/pull/32729#pullrequestreview-3117474040>).
* Reviewed warning for oversized `-dbcache`: <https://github.com/bitcoin/bitcoin/pull/33333#pullrequestreview-3226045467>
* Reviewed wording consistency fix around datacarriersize in release notes: <https://github.com/bitcoin/bitcoin/pull/33224#pullrequestreview-3141743326>
* Review continued of sigops PR, <https://github.com/bitcoin/bitcoin/pull/32800/#pullrequestreview-3081014156>, <https://github.com/bitcoin/bitcoin/pull/32800/#pullrequestreview-3168171370>
* Pushed back on change to C++ coding style: <https://github.com/bitcoin/bitcoin/pull/32813#discussion_r2303151367>


## September

### NATPMP/PCP code testing

Tested improvements to NATPMP/PCP code requiring reinstalling my OpenWRT router, but at least the router can provides logs: <https://github.com/bitcoin/bitcoin/pull/32159#issuecomment-3243290826> (made related comment: <https://github.com/openwrt/packages/issues/17871#issuecomment-3243222244>)


### Transaction location index - continued

* Found crash bug: <https://github.com/bitcoin/bitcoin/pull/32541#discussion_r2321395923>
* Profiled reindexing: <https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3253662102>, which made apparent to me the cost of re-hashing transactions upon load from disk (pre-existing issue).
* ðŸŒŸ Diagrammed high level flow, and asked whether index could live on client side rather than within Bitcoin Core (<https://github.com/bitcoin/bitcoin/pull/32541#pullrequestreview-3189055673>), prompting author to start investigating that avenue: <https://github.com/bitcoin/bitcoin/pull/32541#issuecomment-3267485313>


### Node sync slowdown logging

Reviewed change which adds logging to help node runners understand why syncing slows down (different behaviors around assumevalid): <https://github.com/bitcoin/bitcoin/pull/33336#pullrequestreview-3227682434>

* ðŸŒŸ Reasoned deeply and provided missing test: <https://github.com/bitcoin/bitcoin/pull/33336#discussion_r2351694634>


### Windows uninstaller fix

ðŸŒŸ Implemented v30 fix for removing old Windows uninstaller registry entry: <https://github.com/bitcoin/bitcoin/pull/33422>


### libmultiprocess

Dependency was recently added to master and needs more eyes to approach review standard of Bitcoin Core.

Reviewed bug fix but wasn't done before the merge. Was still able to catch missing thread safety annotations and highlight disjoint function parameters leading to @ryanofsky creating the new construct `GuardedRef`: <https://github.com/bitcoin-core/libmultiprocess/pull/201#pullrequestreview-3204943772>, <https://github.com/bitcoin-core/libmultiprocess/pull/201#pullrequestreview-3210069840>

Implemented minor doc+util improvements: <https://github.com/bitcoin-core/libmultiprocess/pull/213>


### Improved my debugging support PR

Further developed better C++ debugging support when running nodes within the context of functional tests. Now it automatically attaches the debugger: <https://github.com/bitcoin/bitcoin/pull/31723#issuecomment-3333179240>


### Misc

* Proposed minor improvement to Python test framework: <https://github.com/bitcoin/bitcoin/pull/33423>
* Reviewed change to move on from unsupported MacOS versions: <https://github.com/bitcoin/bitcoin/pull/33489#pullrequestreview-3278413474>
  * Review probably inspired creation of <https://github.com/bitcoin/bitcoin/pull/33549>
* Reviewed change making Windows builds use UTF-8 encoding more extensively: <https://github.com/bitcoin/bitcoin/pull/32380#pullrequestreview-3251179556>
* Reviewed v30 release update to headers sync & other params: <https://github.com/bitcoin/bitcoin/pull/33274#pullrequestreview-3179774960>
* Reviewed change to remove hard-coding of "Bitcoin Core" on Mac & built Guix builds: <https://github.com/bitcoin/bitcoin/pull/33158#pullrequestreview-3180244945>
* Reviewed change to make arith_uint256 trivially copyable: <https://github.com/bitcoin/bitcoin/pull/33332#pullrequestreview-3196404994>
* Reviewed change spawned from my Sockman lite review: <https://github.com/bitcoin/bitcoin/pull/33378#pullrequestreview-3229478311>


## Grant comparison - planned vs achieved

My goal in the grant proposal for month 3 was "Open my HeadersSync work for general review". In part I have done that through moving much of the unit test refactoring to a separate PR in May <https://github.com/bitcoin/bitcoin/pull/32579>, which has ACKs from 5 people.

Have not gotten my caching change (<https://github.com/l0rinc/bitcoin/pull/3>) entirely ready for general review yet, still need to work on either stealing RAM from `-dbcache`+mempool, or switch to file-based cache. See also the section on "HeadersSyncState instance count predictability".

Also got confirmation in May from the original `HeadersSyncState` (co)author @sdaftuar that he agrees conceptually that an optimistic headers cache would be a good step forward.


## Personal repo notes

Added more notes for my future self and others on topics related to Bitcoin Core development (Guix, local CI, CMake, Git, strace, perf, Windows, IBD, Nix): <https://github.com/hodlinator/hodlinator/compare/6dea5c5fa16de9d27db5312cb2bbed1c49fa2e20...44b9e5f80731302e778c3ea6450e606f60fe1e25>


## Plan for next quarter

### Contributing review to one of the larger initiatives

@davidgumberg mentioned that based off multiprocess coming in a bit hot (late merge of <https://github.com/bitcoin/bitcoin/pull/33233>), it would be good to consciously contribute review to one of the larger initiatives early in the release cycle. So I aim to dive into one of:

* ASMap
* Cluster mempool
* Silent payments
* Other


### Continued work on HeadersSyncState predictability & cache

See "planned vs achieved" above + tracking issue: <https://github.com/bitcoin/bitcoin/issues/33547>


### Continued misc reviews
